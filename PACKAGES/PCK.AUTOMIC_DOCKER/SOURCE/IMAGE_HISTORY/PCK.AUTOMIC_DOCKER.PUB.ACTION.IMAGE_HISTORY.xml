<?xml version="1.0" encoding="UTF-8"?>
<jobp>
   <metadata>
      <row>
         <version>21.0.0</version>
      </row>
   </metadata>
   <general_attributes>
      <row>
         <minimum_ae_version>11.2</minimum_ae_version>
         <auto_deactivation>F</auto_deactivation>
         <child_flags>00000000000000000000000000000000</child_flags>
         <deactivation_condition>ANY_OK</deactivation_condition>
         <workflow_children>3</workflow_children>
         <last_runtimes>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</last_runtimes>
         <max_parallel_action>1</max_parallel_action>
         <mrt_time>000000</mrt_time>
         <name>PCK.AUTOMIC_DOCKER.PUB.ACTION.IMAGE_HISTORY</name>
         <has_prompts>1</has_prompts>
         <type>JOBP</type>
         <inherit_output_filter>N</inherit_output_filter>
         <queue>CLIENT_QUEUE</queue>
         <description>Fetch image history from Docker</description>
         <versioning_id>1104668068</versioning_id>
      </row>
   </general_attributes>
   <documentation>
      <row>
         <Docu><![CDATA[= Action name =
PCK.AUTOMIC_DOCKER.PUB.ACTION.IMAGE_HISTORY

= General description =
This action is used to fetch Image history from Docker system as per the specified 'Image name' input. Output of this action will be an xml file containing history of the specified docker Image. Image name can be given as xyz:1.1 where xyz is the name of image/repository and tag is 1.1

= Inputs =
* Server URL		: Specify the host IP address or fully qualified domain name
* Certificate Path	: Certificate directory path. Specify only for secure URL (https)
* Image Name and Tag	: Name of the image and tag (optional) for which you want to fetch history from Docker

= Behavior =
(see general description)

= Outputs =
* Return code is 0 in case of success.
* Return code is 1 in case of failure.
* Return code is 2 in case of connection timed out !!

= Return Value =
The xml will have the following structure
 <ImageHistory>
	<History>
		<Tags>nagarro:1.10.1</Tags>
		<Created>1437467398</Created>
		<Comment />
		<CreatedBy>
			/bin/sh -c #(nop) ADD
			dir:05e6b205cc96c8dca6f85542f7f74a09429c772ca4be6ec48ae5910ad15df51d
			in .
		</CreatedBy>
		<Id>
			c998cdf87a60f5daa6cf5c0d3e8c33d6e48d22d92f1032b72d1b213b84d0c854
		</Id>
		<Size>0</Size>
	</History>
	<History>
		<Tags>null</Tags>
		<Created>1437467398</Created>
		<Comment />
		<CreatedBy>/bin/sh -c #(nop) CMD ["/bin/sh" "-c" "date"]</CreatedBy>
		<Id>
			a32eb3926da5db15510138b0c2a33092bbeb6fdbe0c05afbc8f23d2c87b23d38
		</Id>
		<Size>0</Size>
	</History>
	<History>
		<Tags>null</Tags>
		<Created>1437467398</Created>
		<Comment />
		<CreatedBy>/bin/sh -c #(nop) MAINTAINER Rajneesh Kumar</CreatedBy>
		<Id>
			7e0ef79a3656cd6375a87a0e7beff0f205dca29494f5fa224d2e22f4630a9582
		</Id>
		<Size>0</Size>
	</History>
</ImageHistory>

= Rollback =
(none)

= Logging =
AE logs will be displayed in the AE report.
Java logs will be created at \temp\docker.log under agent installation directory.

= Example =
(none)]]></Docu>
      </row>
   </documentation>
   <workflow_attributes>
      <row>
         <activation_at_runtime>1</activation_at_runtime>
         <reuse_agent_group>1</reuse_agent_group>
      </row>
   </workflow_attributes>
   <workflow_definitions>
      <row>
         <active>1</active>
         <childflags>0000000000000000</childflags>
         <column>1</column>
         <line_number>1</line_number>
         <mrt_time>000000</mrt_time>
         <object_name>START</object_name>
         <object_type><![CDATA[<START>]]></object_type>
         <row>1</row>
         <precondition_error_action>S</precondition_error_action>
      </row>
      <row>
         <active>1</active>
         <alias>IMAGE_HISTORY</alias>
         <childflags>0000000000000000</childflags>
         <column>2</column>
         <line_number>2</line_number>
         <mrt_time>000000</mrt_time>
         <object_name>PCK.AUTOMIC_DOCKER.PRV.JOB.IMAGE_HISTORY@GENERIC</object_name>
         <object_type>JOBS</object_type>
         <predecessors>1</predecessors>
         <postcondition_action>1</postcondition_action>
         <rollback_enabled>1</rollback_enabled>
         <row>1</row>
         <precondition_error_action>A</precondition_error_action>
      </row>
      <row>
         <active>1</active>
         <childflags>0000000000000000</childflags>
         <column>3</column>
         <line_number>3</line_number>
         <mrt_time>000000</mrt_time>
         <object_name>END</object_name>
         <object_type><![CDATA[<END>]]></object_type>
         <predecessors>1</predecessors>
         <row>1</row>
         <precondition_error_action>A</precondition_error_action>
      </row>
   </workflow_definitions>
   <line_conditions>
      <row>
         <workflow_line_number>2</workflow_line_number>
         <line_number>1</line_number>
         <predecessor_line_number>1</predecessor_line_number>
         <ok_status>ANY_OK</ok_status>
      </row>
      <row>
         <workflow_line_number>3</workflow_line_number>
         <line_number>1</line_number>
         <predecessor_line_number>2</predecessor_line_number>
         <ok_status>ANY_OK</ok_status>
      </row>
   </line_conditions>
   <prompt_set_list>
      <row>
         <line_number>1</line_number>
         <prompt_set>PCK.AUTOMIC_DOCKER.PRV.PROMPTSET.CONNECTION_INFO</prompt_set>
         <display_order>1</display_order>
      </row>
      <row>
         <line_number>2</line_number>
         <prompt_set>PCK.AUTOMIC_DOCKER.PRV.PROMPTSET.IMAGE_HISTORY</prompt_set>
         <display_order>2</display_order>
      </row>
      <row>
         <line_number>3</line_number>
         <prompt_set>PCK.ITPA_SHARED.PRV.PROMPTSET.OVERWRITE_AGENT</prompt_set>
         <display_order>3</display_order>
      </row>
   </prompt_set_list>
   <prompt_set_defaults>
      <row>
         <alternative_view>1</alternative_view>
         <prompt_set_element_number>3</prompt_set_element_number>
         <prompt_set>PCK.ITPA_SHARED.PRV.PROMPTSET.OVERWRITE_AGENT</prompt_set>
         <value>&amp;AGENT#</value>
         <variable_name>AGENT#</variable_name>
      </row>
      <row>
         <alternative_view>1</alternative_view>
         <prompt_set_element_number>3</prompt_set_element_number>
         <prompt_set>PCK.ITPA_SHARED.PRV.PROMPTSET.OVERWRITE_AGENT</prompt_set>
         <value>&amp;LOGIN#</value>
         <variable_name>LOGIN#</variable_name>
      </row>
   </prompt_set_defaults>
   <rollback_definitions>
      <row>
      </row>
   </rollback_definitions>
</jobp>
