<?xml version="1.0" encoding="UTF-8"?>
<jobp>
   <metadata>
      <row>
         <version>21.0.0</version>
      </row>
   </metadata>
   <general_attributes>
      <row>
         <minimum_ae_version>11.2</minimum_ae_version>
         <auto_deactivation>F</auto_deactivation>
         <child_flags>00000000000000000000000000000000</child_flags>
         <deactivation_condition>ANY_OK</deactivation_condition>
         <workflow_children>3</workflow_children>
         <last_runtimes>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</last_runtimes>
         <max_parallel_action>1</max_parallel_action>
         <mrt_time>000000</mrt_time>
         <name>PCK.AUTOMIC_DOCKER.PUB.ACTION.INSPECT_IMAGE</name>
         <has_prompts>1</has_prompts>
         <type>JOBP</type>
         <inherit_output_filter>N</inherit_output_filter>
         <queue>CLIENT_QUEUE</queue>
         <description>Inspect an image from the system where docker is installed</description>
         <versioning_id>-99803164</versioning_id>
      </row>
   </general_attributes>
   <documentation>
      <row>
         <Docu><![CDATA[= Action name =
PCK.AUTOMIC_DOCKER.PUB.ACTION.INSPECT_IMAGE

= General description =
This action is used to inspect an existing image from the system where docker is installed based on specified image name text. Output of this action will be an XML path consisting all the low level information about specified image. Moreover, XML file will be created on the same host where agent is running. In case there is no image in docker system as per the specified image name text, Action will fail.
Note: User can specify tag using:
E.g. Ubuntu:14.04 to distinguish between similar images with different tags. If user has not specified any tag and multiple images exist with the same name then the docker matches the best image as per the specified input.

= Inputs =
* Server URL		: Specify the host IP address or fully qualified domain name
* Certificate Path	: Certificate directory path. Specify only for secure URL (https)
* Image Name		: Specify image name that you want to inspect
* Overwrite Agent	: Overwrites the default agent
* Overwrite Login	: Overwrites the default login

= Behavior =
(see general description)

= Outputs =
* Return code is 0 in case of success.
* Return code is 1 in case of failure.
* Return code is 2 in case of connection timed out !!

=Return Value=
The XML will have the following structure.
<INSPECT_IMAGE>
    <Comment />
    <VirtualSize>834049288</VirtualSize>
    <Architecture>amd64</Architecture>
    <Os>linux</Os>
    <Parent>6dbe33996a18685089bf7f8d72db6572321122c0c98542836bb56afa2b9e0c46</Parent>
    <Config>
        <User />
        <Memory>0</Memory>
        <OpenStdin>false</OpenStdin>
        <Env>PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</Env>
        <Env>LANG=C.UTF-8</Env>
        <Env>JAVA_VERSION=8u45</Env>
        <Env>JAVA_DEBIAN_VERSION=8u45-b14-3</Env>
        <Env>CA_CERTIFICATES_JAVA_VERSION=20140324</Env>
        <Env>MAVEN_VERSION=3.3.3</Env>
        <Env>MAVEN_HOME=/usr/share/maven</Env>
        <Image>6dbe33996a18685089bf7f8d72db6572321122c0c98542836bb56afa2b9e0c46</Image>
        <StdinOnce>false</StdinOnce>
        <AttachStdout>false</AttachStdout>
        <Volumes>null</Volumes>
        <AttachStdin>false</AttachStdin>
        <Domainname />
        <Tty>false</Tty>
        <Cmd>mvn</Cmd>
        <Entrypoint>null</Entrypoint>
        <AttachStderr>false</AttachStderr>
        <Hostname>9f6392279d27</Hostname>
        <Labels />
        <MacAddress />
        <NetworkDisabled>false</NetworkDisabled>
        <ExposedPorts>null</ExposedPorts>
        <Cpuset />
        <WorkingDir />
        <CpuShares>0</CpuShares>
        <PortSpecs>null</PortSpecs>
        <MemorySwap>0</MemorySwap>
    </Config>
    <Size>0</Size>
    <Created>2015-05-25T12:15:38.967454822Z</Created>
    <ContainerConfig>
        <User />
        <Memory>0</Memory>
        <OpenStdin>false</OpenStdin>
        <Env>PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</Env>
        <Env>LANG=C.UTF-8</Env>
        <Env>JAVA_VERSION=8u45</Env>
        <Env>JAVA_DEBIAN_VERSION=8u45-b14-3</Env>
        <Env>CA_CERTIFICATES_JAVA_VERSION=20140324</Env>
        <Env>MAVEN_VERSION=3.3.3</Env>
        <Env>MAVEN_HOME=/usr/share/maven</Env>
        <Image>6dbe33996a18685089bf7f8d72db6572321122c0c98542836bb56afa2b9e0c46</Image>
        <StdinOnce>false</StdinOnce>
        <AttachStdout>false</AttachStdout>
        <Volumes>null</Volumes>
        <AttachStdin>false</AttachStdin>
        <Domainname />
        <Tty>false</Tty>
        <Cmd>/bin/sh</Cmd>
        <Cmd>-c</Cmd>
        <Cmd>#(nop) CMD ["mvn"]</Cmd>
        <Entrypoint>null</Entrypoint>
        <AttachStderr>false</AttachStderr>
        <Hostname>9f6392279d27</Hostname>
        <Labels />
        <MacAddress />
        <NetworkDisabled>false</NetworkDisabled>
        <ExposedPorts>null</ExposedPorts>
        <Cpuset />
        <WorkingDir />
        <CpuShares>0</CpuShares>
        <PortSpecs>null</PortSpecs>
        <MemorySwap>0</MemorySwap>
    </ContainerConfig>
    <Container>3c4d4e7c80b5a97107013903a2d68f411f87f00ab451d74d582797a5bed71c7d</Container>
    <DockerVersion>1.6.0</DockerVersion>
    <Author />
    <Id>84860f42e8dfb7ddffa11c1a6a3ddc334f28294a954cb278ffcd2f2893f42937</Id>
</INSPECT_IMAGE>

= Rollback =
(none)

= Logging =
AE logs will be displayed in the AE report.
Java logs will be created at \temp\docker.log under agent installation directory.

= Example =
(none)]]></Docu>
      </row>
   </documentation>
   <workflow_attributes>
      <row>
         <activation_at_runtime>1</activation_at_runtime>
         <reuse_agent_group>1</reuse_agent_group>
      </row>
   </workflow_attributes>
   <workflow_definitions>
      <row>
         <active>1</active>
         <childflags>0000000000000000</childflags>
         <column>1</column>
         <line_number>1</line_number>
         <mrt_time>000000</mrt_time>
         <object_name>START</object_name>
         <object_type><![CDATA[<START>]]></object_type>
         <row>1</row>
         <precondition_error_action>S</precondition_error_action>
      </row>
      <row>
         <active>1</active>
         <alias>INSPECT_IMG</alias>
         <childflags>0000000000000000</childflags>
         <column>2</column>
         <line_number>2</line_number>
         <mrt_time>000000</mrt_time>
         <object_name>PCK.AUTOMIC_DOCKER.PRV.JOB.INSPECT_IMAGE@GENERIC</object_name>
         <object_type>JOBS</object_type>
         <predecessors>1</predecessors>
         <postcondition_action>1</postcondition_action>
         <rollback_enabled>1</rollback_enabled>
         <row>1</row>
         <precondition_error_action>A</precondition_error_action>
      </row>
      <row>
         <active>1</active>
         <childflags>0000000000000000</childflags>
         <column>3</column>
         <line_number>3</line_number>
         <mrt_time>000000</mrt_time>
         <object_name>END</object_name>
         <object_type><![CDATA[<END>]]></object_type>
         <predecessors>1</predecessors>
         <row>1</row>
         <precondition_error_action>A</precondition_error_action>
      </row>
   </workflow_definitions>
   <line_conditions>
      <row>
         <workflow_line_number>2</workflow_line_number>
         <line_number>1</line_number>
         <predecessor_line_number>1</predecessor_line_number>
         <ok_status>ANY_OK</ok_status>
      </row>
      <row>
         <workflow_line_number>3</workflow_line_number>
         <line_number>1</line_number>
         <predecessor_line_number>2</predecessor_line_number>
         <ok_status>ANY_OK</ok_status>
      </row>
   </line_conditions>
   <prompt_set_list>
      <row>
         <line_number>1</line_number>
         <prompt_set>PCK.AUTOMIC_DOCKER.PRV.PROMPTSET.CONNECTION_INFO</prompt_set>
         <display_order>1</display_order>
      </row>
      <row>
         <line_number>2</line_number>
         <prompt_set>PCK.AUTOMIC_DOCKER.PRV.PROMPTSET.INSPECT_IMAGE</prompt_set>
         <display_order>2</display_order>
      </row>
      <row>
         <line_number>3</line_number>
         <prompt_set>PCK.ITPA_SHARED.PRV.PROMPTSET.OVERWRITE_AGENT</prompt_set>
         <display_order>3</display_order>
      </row>
   </prompt_set_list>
   <prompt_set_defaults>
      <row>
         <alternative_view>1</alternative_view>
         <prompt_set_element_number>3</prompt_set_element_number>
         <prompt_set>PCK.ITPA_SHARED.PRV.PROMPTSET.OVERWRITE_AGENT</prompt_set>
         <value>&amp;AGENT#</value>
         <variable_name>AGENT#</variable_name>
      </row>
      <row>
         <alternative_view>1</alternative_view>
         <prompt_set_element_number>3</prompt_set_element_number>
         <prompt_set>PCK.ITPA_SHARED.PRV.PROMPTSET.OVERWRITE_AGENT</prompt_set>
         <value>&amp;LOGIN#</value>
         <variable_name>LOGIN#</variable_name>
      </row>
   </prompt_set_defaults>
   <rollback_definitions>
      <row>
      </row>
   </rollback_definitions>
</jobp>
